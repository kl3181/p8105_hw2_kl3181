p8105\_hw2\_kl3181
================
Kelley Lou

``` r
library(tidyverse)
```

    ## ── Attaching packages ────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.3     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.1     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ───────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

## Problem 1

Read in Mr. Trashweel data set and clean.

``` r
trashwheel_df = read_xlsx(
  "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
      sheet = "Mr. Trash Wheel",
      range = cell_cols("A:N")) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>% 
  mutate(
      sports_balls = round(sports_balls),
      sports_balls = as.integer(sports_balls)
  )
```

Read in precipitation data for 2018 and 2017.

``` r
precip_2018 = read_excel(
  "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
      sheet = "2018 Precipitation", 
      skip = 1
      ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2018) %>%
  relocate(year)

precip_2017 = read_excel(
  "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
      sheet = "2017 Precipitation",
      skip = 1
      ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2017) %>%
  relocate(year)
```

Now combine annual precipitation dataframes. This can be done with a
“helper” tibble that contains pairs of numeric and character ways of
representing month, and then merge with precipitation dataset.

``` r
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018, precip_2017)

precip_df = 
  left_join(precip_df, month_df, by = "month")
```

This dataset contains information from the Mr.Trashweel trash collector
in Baltimore, Maryland. As trash enters the inner harbor, the trashweel
collects that trash, and then stores it in a dumpster. The dataset
contains information on year, month, and trash collected, including some
specific kinds of trash. There are a total of 344 rows in our final
dataset. Additional data sheets include month precipitation data. There
are variables including dumpster, month, year, date, weight\_tons,
volume\_cubic\_yards, plastic\_bottles, polystyrene, cigarette\_butts,
glass\_bottles, grocery\_bags, chip\_bags, sports\_balls, homes\_powered
and has data from 2014 to 2019. The median number of sports balls in
2017 was 8. The total precipitation in 2017 was 32.93 inches. In 2018,
it was 70.33 inches.

## Problem 2

\#\#\#\#\#Read in NYC transit dataset and clean.

``` r
transit_df =  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
    janitor::clean_names() %>%
    select(line, station_name, station_latitude, station_longitude, route1:route11, entry, entrance_type, vending, ada) %>% 
    mutate(
      entry = recode(entry, "YES" = "TRUE", "NO" = "FALSE"
    ), 
)
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

This dataset focuses on NYC transit data, with information related to
each entrance and exit for each subway station in NYC. After cleaning
the dataset, the dataset contains variables line, station\_name,
station\_latitude, station\_longitude, route1, route2, route3, route4,
route5, route6, route7, route8, route9, route10, route11, entry,
entrance\_type, vending, ada. The clean\_names function was utilized in
the janitor package. The entry variable was changed from character to
logical. Additionally, there are a total of 1868 rows and 19 columns.
The data is not tidy because the route number and route name are not
distinct variables.

##### Data Related Questions

``` r
distinct_stations = distinct(transit_df, line, station_name, .keep_all = TRUE)
ada_compliant = nrow(filter(distinct_stations, ada == TRUE))
no_vending = transit_df %>% 
  filter(vending == "NO") 
prop = round(nrow(filter(no_vending, entry == TRUE)) / nrow(no_vending), 3)
```

There are 465 distinct stations, 84 stations are ADA compliant and 37.7
percent of entrances/exits without vending allow entrance.

##### Reformat data

``` r
transit_reformat = transit_df %>% 
  mutate_at(vars(route8:route11), as.character) %>% 
  pivot_longer(
    route1:route11, 
    names_to = "route_num", 
    values_to = "route_name") %>% 
  drop_na(route_name)

A_train = transit_reformat %>% 
  filter(route_name == "A") %>% 
  distinct(line, station_name, .keep_all = TRUE)

ADA_A = A_train %>% 
  filter(ada == TRUE)
```

There are 60 distinct stations serving the A train. Among these
stations, 17 are ADA compliant.
